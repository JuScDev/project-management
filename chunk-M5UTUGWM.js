import{a as p}from"./chunk-3KCAOOFU.js";import{B as a,U as s,X as l,ba as c,n as i,q as n}from"./chunk-7H4R236B.js";var h=class o{apiUrl="https://localhost:5001/api/auth";_http=c(p);register(e,r){return this._http.post(`${this.apiUrl}/register`,{username:e,password:r}).pipe(s(t=>console.log("Register API response:",t)),n(t=>t.success),a(t=>(console.error("Register Error:",t),i(()=>new Error(t.error?.message||"Registration failed")))))}login(e,r){return this._http.post(`${this.apiUrl}/login`,{username:e,password:r}).pipe(s(t=>this._storeTokens(t)))}logout(){let e=this.getRefreshToken();e&&this._http.post(`${this.apiUrl}/logout`,{refreshToken:e}).subscribe(),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}getAccessToken(){return localStorage.getItem("accessToken")}getRefreshToken(){return localStorage.getItem("refreshToken")}refreshToken(){let e=this.getRefreshToken();return this._http.post(`${this.apiUrl}/refresh-token`,{refreshToken:e}).pipe(s(r=>this._storeTokens(r)))}_storeTokens(e){localStorage.setItem("accessToken",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken)}static \u0275fac=function(r){return new(r||o)};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};export{h as a};
